<!DOCTYPE html>
<html>
    <head>
        <title>Fibonacci Calculator</title>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
    </head>
    <body>
        <script>     
            var fibCalculator;
            WebAssembly.instantiateStreaming(
                fetch("fib.wasm"), {}
            ).then(results => fibCalculator = results.instance.exports);
        
            function run_wasm(){
                document.querySelector("#result").innerHTML=``
                var num = document.querySelector("#num").value;

                var timeInit=Date.now();
                for(var i=0; i<=num; i++){
                    var result=fibCalculator.fib(i);

                    console.log(result);
                    document.querySelector("#result").innerHTML += `Result ${i}: ${result}<br/>`;
                }
                var timeEnd=Date.now();
                var timeEnlapsed=timeEnd-timeInit;

                document.querySelector("#result").innerHTML+=`Time ${num}: ${timeEnlapsed} ms<br/>`
            }
        </script>
        <p>Fibonacci Calculator</p>
        <input type="number" id="num">
        <button onclick="run_wasm()">Boton</button>
        <p><span id="result"></span></p>
    </body>
</html>